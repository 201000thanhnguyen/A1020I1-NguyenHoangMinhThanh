
<div class="card">
  <div class="card-header">
    <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#idModalCustomer"
            (click)="btnAdd()">
      Add Customer <i class="far fa-plus-square"></i>
    </button>
  </div>
  <div class="card-body">
    <table class="table table-striped table-responsive w-100 d-block d-md-table data-table"
           datatable
           [dtTrigger]="dtTrigger"
           [dtOptions]="dtOptions">
      <thead>
      <tr>
        <th>id</th>
        <th>Name</th>
        <th>Birthday</th>
        <th>Gender</th>
        <th>Email</th>
        <th>Customer Type</th>
        <th>Action</th>
      </tr>
      </thead>
      <tbody>
      <tr *ngFor="let customer of customerArr">
        <td>{{customer.id}}</td>
        <td>{{customer.customerName}}</td>
        <td>{{customer.customerBirthday}}</td>
        <td>{{customer.customerGender == 0 ? 'female' : 'male'}}</td>
        <td>{{customer.customerEmail}}</td>
        <td>{{customer.customerType.customerTypeName}}</td>
        <td>
          <div class="dropdown">
            <button type="button" class="btn btn-success dropdown-toggle" id="dropdownAction"
                    data-toggle="dropdown" data-haspopup="true" aria-expanded="false">
              action
            </button>
            <div class="dropdown-menu" aria-labelledby="dropdownAction">
              <a type="button" class="dropdown-item" [routerLink]="['/Customer', customer.id]">detail</a>
              <a type="button" class="dropdown-item" data-toggle="modal" data-target="#idModalCustomer"
                 (click)="btnEdit(customer.id)">
                edit
              </a>
              <a type="button" class="dropdown-item" data-toggle="modal" data-target="#idModalCustomer"
                 (click)="btnDelete(customer.id)">
                delete
              </a>
            </div>
          </div>
        </td>
      </tr>
      </tbody>
    </table>
  </div>
</div>

<div class="modal fade" id="idModalCustomer" tabindex="-1" role="dialog" aria-label="al-ModalCustomer" aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable mw-75"  role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLongTitle">Customer</h5>
        <button type="button" class="closes" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <form [formGroup]="formGroup">
          <div class="row">
            <div class="col-md-6">
              <label for="customerName">Name</label>
              <input type="text" id="customerName" class="form-control"
                     formControlName="customerName">
              <small class="text-danger"
                     *ngIf="formGroup.get('customerName')?.invalid && formGroup.get('customerName')?.touched">
                invalid !
              </small>
            </div>
            <div class="col-md-6">
              <label for="customerBirthday">Birthday</label>
              <input type="date" id="customerBirthday" class="form-control" formControlName="customerBirthday">
              <small class="text-danger"
                     *ngIf="formGroup.get('customerBirthday')?.invalid && formGroup.get('customerBirthday')?.touched">
                invalid !
              </small>
            </div>
            <div class="col-md-6 mx-auto my-auto text-center">
              <div class="form-check form-check-inline">
                <input class="form-check-input" type="radio" id="inlineRadio1" value="1" formControlName="customerGender">
                <label class="form-check-label" for="inlineRadio1">Male</label>
              </div>
              <div class="form-check form-check-inline">
                <input class="form-check-input" type="radio" id="inlineRadio2" value="0" formControlName="customerGender">
                <label class="form-check-label" for="inlineRadio2">Female</label>
              </div>
            </div>
            <div class="col-md-6">
              <label for="customerEmail">
                Email
              </label>
              <input type="email" id="customerEmail" class="form-control" formControlName="customerEmail">
              <small class="text-danger"
                     *ngIf="formGroup.get('customerEmail')?.invalid && formGroup.get('customerEmail')?.touched">
                invalid !
              </small>
            </div>
            <div class="col-md-6">
              <label for="customerAddress">
                Address
              </label>
              <input type="text" id="customerAddress" class="form-control" formControlName="customerAddress">
              <small class="text-danger"
                     *ngIf="formGroup.get('customerAddress')?.invalid && formGroup.get('customerAddress')?.touched">
                invalid !
              </small>
            </div>
            <div class="col-md-6">
              <label for="customerType">Customer Type</label>
              <select id="customerType" class="form-control" formControlName="customerType">
                <option *ngFor="let customerType of customerTypeArr" [ngValue]=customerType>{{customerType.customerTypeName}}</option>
              </select>
              <small class="text-danger"
                     *ngIf="formGroup.get('customerType')?.invalid && formGroup.get('customerType')?.touched">
                invalid !
              </small>
            </div>
          </div>
        </form>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">
          Close
        </button>
        <button type="button" class="btn btn-primary" data-dismiss="modal"
                (click)="submitAddOrUpdate()"
                [disabled]="!formGroup.valid"
                [hidden]="attrHidden">
          {{!formGroup.controls.id.value ? 'Create' : 'Update'}}
        </button>
        <button type="button" class="btn btn-danger" data-dismiss="modal"
                (click)="submitDelete(formGroup.get('id')?.value)"
                [hidden]="!attrHidden">
          Delete
        </button>
      </div>
    </div>
  </div>
</div>

<router-outlet></router-outlet>
